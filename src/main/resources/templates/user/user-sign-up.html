<!DOCTYPE HTML>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pwstrength-bootstrap/2.2.1/pwstrength-bootstrap.min.js"></script>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css">

    <link rel="stylesheet" type="text/css" href="/css/login.css" >
    <link rel="stylesheet" type="text/css" href="/css/style.css" >

    <title>Sign up</title>
</head>

<body>
<div th:insert="menu.html :: nav"></div>

<div class="container">

    <h3>Rejestracja </h3>
    <hr>

    <div class="login-form">


            <form action="/sign_up" th:method="POST" role="form">

                <div class="logout-info form-group" th:if="${param.emailError}">
                    <div>Użytkownik o podanym adresie email już istnieje</div>
                </div>

                <div class="form-group">
                    <input type="text" required="required" name="firstName"
                           class="form-control" placeholder="Imię">
                </div>

                <div class="form-group">
                    <input type="text" required="required" name="secondName"
                           class="form-control" placeholder="Nazwisko">
                </div>

                <div class="form-group">
                    <input type="email" required="required" name="username"
                           class="login-element form-control" placeholder="email">
                </div>

                <div class="form-group">
                    <input type="tel" required="required" name="phoneNumber" pattern="[0-9]{3}-[0-9]{3}-[0-9}{3}"
                           class="form-control" placeholder="Numer kontaktowy">
                </div>

                <div class="form-group">
                    <div id="pwd-container">
                        <div class="spacePassword">
                            <input type="password" class="form-control login-element" minlength="8" name="password"
                                   required="required" id="password" placeholder="Hasło">
                        </div>
                        <div class="pwstrength_viewport_progress">
                            <div id="messages" class="float-right"></div>
                        </div>
                    </div>
                </div>

                <div class="form-group">
                    <input type="password" required="required" id="confirm_password"
                           class="login-element form-control" placeholder="powtórz hasło">
                </div>

                <div class="form-inline">
                    <button type="submit" class="btn btn-info">Zarejestruj</button>
                    <a class="ml-auto" th:href="@{/login}">Zaloguj</a>
                </div>
            </form>
    </div>

    <hr>
    <a href="javascript:history.back()">Powrót</a>

</div>
<script>
    var password = document.getElementById("password")
  , confirm_password = document.getElementById("confirm_password");

function validatePassword(){
  if(password.value != confirm_password.value) {
    confirm_password.setCustomValidity("Hasło nie pasuję");
  } else {
    confirm_password.setCustomValidity('');
  }
}

password.onchange = validatePassword;
confirm_password.onkeyup = validatePassword;
</script>
<script>
    jQuery(document).ready(function () {
    "use strict";
    var options = {};
    options.ui = {
        bootstrap4: true,
        container: "#pwd-container",
        viewports: {
            progress: ".pwstrength_viewport_progress"
        },
        showVerdictsInsideProgressBar: true
    };
    options.common = {
        debug: true,
        onLoad: function () {
            $('#messages').text('Siła hasła');
        }
    };
    $('#password').pwstrength(options);
});
</script>
</body>
</html>
